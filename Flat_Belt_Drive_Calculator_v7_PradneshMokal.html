<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flat Belt Drive Design Calculator - PSG Data Book</title>
    <style>
        :root {
            --primary-color: #2a5caa;
            --secondary-color: #1f4788;
            --accent-color: #32b8c6;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --text-dark: #333333;
            --text-light: #666666;
            --border-color: #e0e0e0;
            --success-color: #28a745;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 30px 0;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .section {
            background: var(--bg-white);
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .section-title {
            color: var(--primary-color);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent-color);
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text-dark);
            font-size: 14px;
        }

        .label-helper {
            font-size: 12px;
            color: var(--text-light);
            font-weight: normal;
            margin-left: 4px;
        }

        input, select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(50, 184, 198, 0.1);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #2a9fa8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(50, 184, 198, 0.3);
        }

        .btn-secondary {
            background-color: #e0e0e0;
            color: var(--text-dark);
        }

        .btn-secondary:hover {
            background-color: #d0d0d0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 13px;
        }

        thead {
            background-color: var(--primary-color);
            color: white;
        }

        th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--border-color);
        }

        tbody tr:hover {
            background-color: var(--bg-light);
        }

        tbody tr:nth-child(even) {
            background-color: #fafafa;
        }

        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 13px;
        }

        .alert-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .divider {
            height: 1px;
            background-color: var(--border-color);
            margin: 20px 0;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .input-row {
                grid-template-columns: 1fr;
            }
            
            .main-grid {
                gap: 15px;
            }
            
            .section {
                padding: 15px;
            }
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-light);
            font-size: 12px;
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>‚öôÔ∏è Flat Belt Drive Design Calculator</h1>
            <p>PSG Data Book Based | 10-Stage Design Process | Real-Time Calculations</p>
        </header>

        <div class="alert alert-info">
            <strong>üìã Guide:</strong> Enter input parameters on the left, results will calculate automatically. All values follow PSG Data Book standards (Pages 7.52, 7.53, 7.54, 5.21, 7.25).
        </div>

        <div class="main-grid">
            <!-- INPUT SECTION -->
            <div class="section">
                <div class="section-title">Input Parameters</div>
                
                <div class="form-group">
                    <label>Power <span class="label-helper">(kW)</span></label>
                    <input type="number" id="power" value="5" step="0.1" min="0.1">
                </div>

                <div class="input-row">
                    <div class="form-group">
                        <label>Input Speed <span class="label-helper">(rpm)</span></label>
                        <input type="number" id="n1" value="1440" step="10" min="100">
                    </div>
                    <div class="form-group">
                        <label>Output Speed <span class="label-helper">(rpm)</span></label>
                        <input type="number" id="n2" value="720" step="10" min="100">
                    </div>
                </div>

                <div class="form-group">
                    <label>Centre Distance <span class="label-helper">(mm)</span></label>
                    <input type="number" id="center" value="2500" step="100" min="500">
                </div>

                <div class="input-row">
                    <div class="form-group">
                        <label>Slip <span class="label-helper">(%)</span></label>
                        <input type="number" id="slip" value="2" step="0.1" min="0.5" max="5">
                    </div>
                    <div class="form-group">
                        <label>Belt Material</label>
                        <select id="material">
                            <option value="canvas">Canvas (E=100, œÉ=1.8)</option>
                            <option value="rubber">Rubber (E=80, œÉ=1.6)</option>
                            <option value="leather">Leather (E=125, œÉ=1.8)</option>
                        </select>
                    </div>
                </div>

                <div class="input-row">
                    <div class="form-group">
                        <label>Drive Type</label>
                        <select id="driveType">
                            <option value="open">Open Drive</option>
                            <option value="crossed">Crossed Drive</option>
                            <option value="quarter">Quarter Turn Drive</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Coefficient of Friction (Œº)</label>
                        <input type="number" id="mu" value="0.25" step="0.01" min="0.15" max="0.4">
                    </div>
                </div>

                <div class="divider"></div>

                <div class="form-group">
                    <label>Load Type</label>
                    <select id="load">
                        <option value="1.0">Normal (1.0)</option>
                        <option value="1.2">Steady (1.2)</option>
                        <option value="1.3">Intermittent (1.3)</option>
                        <option value="1.5">Shock (1.5)</option>
                    </select>
                </div>

                <div class="input-row">
                    <div class="form-group">
                        <label>K Factor (Pulley Calc)</label>
                        <input type="number" id="kFactor" value="1250" step="50" min="1000" max="1300">
                    </div>
                    <div class="form-group">
                        <label>Pull Factor (Œ¶c)</label>
                        <input type="number" id="pullFactor" value="0.55" step="0.01" min="0.5" max="0.65">
                    </div>
                </div>

                <div class="input-row">
                    <div class="form-group">
                        <label>Hours/Day</label>
                        <input type="number" id="hoursPerDay" value="8" step="1" min="1" max="24">
                    </div>
                    <div class="form-group">
                        <label>Days/Year</label>
                        <input type="number" id="daysPerYear" value="300" step="10" min="100" max="365">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="calculate()">Calculate Design</button>
                    <button class="btn btn-secondary" onclick="resetForm()">Reset</button>
                </div>
            </div>

            <!-- RESULTS SECTION -->
            <div class="section">
                <div class="section-title">Design Results</div>
                <div id="resultsContainer"><p style="color: #999; font-style: italic;">Click "Calculate Design" to see results...</p></div>
            </div>
        </div>

        <!-- DETAILED RESULTS SECTION -->
        <div class="section full-width">
            <div class="section-title">Detailed Results</div>
            <div id="detailedOutput"></div>
        </div>
    </div>

    <div class="footer">
        <p>¬© 2025 Flat Belt Drive Design Calculator | Based on PSG Data Book References</p>
        <p>Mechanical Engineering | Machine Design & Analysis</p>
        <p style="margin-top: 15px; font-weight: 600; color: var(--primary-color);">Made by <strong>Pradnesh Mokal</strong></p>
    </div>

    <script>
        // Material Properties (PSG 7.52)
        const materials = {
            canvas: { name: 'Canvas', density: 1250, modulus: 100, tensile: 1.8 },
            rubber: { name: 'Rubber', density: 1140, modulus: 80, tensile: 1.6 },
            leather: { name: 'Leather', density: 1000, modulus: 125, tensile: 1.8 }
        };

        const standardPulleyDiameters = [40, 45, 50, 56, 63, 71, 80, 90, 100, 112, 125, 140, 160, 180, 200, 224, 250, 280, 315, 355, 400, 450, 500, 560, 630, 710, 800, 900, 1000, 1120, 1250, 1400, 1600, 1800, 2000];
        const standardShaftDiameters = [6, 7, 8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 25, 28, 30, 32, 35, 40, 45, 50, 56, 60, 63, 70, 71, 80, 90, 100];

        // Taper Key Dimensions (PSG 5.21)
        const taperKeyDimensions = [
            { minD: 6, maxD: 8, width: 2, thickness: 2 },
            { minD: 8, maxD: 10, width: 3, thickness: 3 },
            { minD: 10, maxD: 12, width: 4, thickness: 4 },
            { minD: 12, maxD: 17, width: 5, thickness: 5 },
            { minD: 17, maxD: 22, width: 6, thickness: 6 },
            { minD: 22, maxD: 30, width: 8, thickness: 8 },
            { minD: 30, maxD: 38, width: 10, thickness: 10 },
            { minD: 38, maxD: 44, width: 12, thickness: 12 },
            { minD: 44, maxD: 50, width: 14, thickness: 14 },
            { minD: 50, maxD: 58, width: 16, thickness: 16 },
            { minD: 58, maxD: 65, width: 18, thickness: 18 },
            { minD: 65, maxD: 75, width: 20, thickness: 20 },
            { minD: 75, maxD: 85, width: 22, thickness: 22 },
            { minD: 85, maxD: 95, width: 25, thickness: 25 }
        ];

        function findNearestStandard(value, standardList) {
            const suitable = standardList.filter(s => s >= value);
            return suitable.length > 0 ? suitable[0] : standardList[standardList.length - 1];
        }

        function getTaperKey(diameter) {
            for (let key of taperKeyDimensions) {
                if (diameter > key.minD && diameter <= key.maxD) {
                    return key;
                }
            }
            return null;
        }

        function calculate() {
            try {
                const power = parseFloat(document.getElementById('power').value);
                const inputSpeed = parseFloat(document.getElementById('n1').value);
                const outputSpeed = parseFloat(document.getElementById('n2').value);
                const centreDistance = parseFloat(document.getElementById('center').value);
                const slip = parseFloat(document.getElementById('slip').value) / 100;
                const materialType = document.getElementById('material').value;
                const driveType = document.getElementById('driveType').value;
                const mu = parseFloat(document.getElementById('mu').value);
                const loadType = document.getElementById('load').value;
                const kFactor = parseFloat(document.getElementById('kFactor').value);
                const pullFactor = parseFloat(document.getElementById('pullFactor').value);
                const hoursPerDay = parseFloat(document.getElementById('hoursPerDay').value);
                const daysPerYear = parseFloat(document.getElementById('daysPerYear').value);

                const material = materials[materialType];

                // STAGE 3: Input Pulley
                const d1Calculated = kFactor * Math.pow(power / inputSpeed, 1/3);
                const d1 = findNearestStandard(d1Calculated, standardPulleyDiameters);

                // STAGE 4: Output Pulley
                const d2Calculated = d1 * (inputSpeed / outputSpeed) * (1 - slip);
                const d2 = findNearestStandard(d2Calculated, standardPulleyDiameters);
                const reductionRatio = d2 / d1;

                // STAGE 5: Belt Length
                let beltLength;
                if (driveType === 'open') {
                    beltLength = 2*centreDistance + (Math.PI/2)*(d2 + d1) + Math.pow(d2 - d1, 2)/(4*centreDistance);
                } else if (driveType === 'crossed') {
                    beltLength = 2*centreDistance + (Math.PI/2)*(d2 + d1) + Math.pow(d2 + d1, 2)/(4*centreDistance);
                } else {
                    beltLength = 2*centreDistance + (Math.PI/2)*(d2 + d1) + Math.sqrt(centreDistance**2 + d2**2) + Math.sqrt(centreDistance**2 + d1**2);
                }
                const beltLengthM = beltLength / 1000;

                // STAGE 6: Force Analysis
                const loadFactor = parseFloat(loadType);
                const designPower = loadFactor * power;
                const beltVelocity = (Math.PI * d1 * inputSpeed) / 60000;

                const angleOfLapDeg = 180 - ((d2 - d1) / centreDistance) * 60;
                const angleOfLapRad = angleOfLapDeg * Math.PI / 180;

                const tensionRatio = Math.exp(mu * angleOfLapRad);
                const T2 = (designPower * 1000) / (beltVelocity * (tensionRatio - 1));
                const T1 = tensionRatio * T2;

                // STAGE 7: Belt Cross-Section
                const sigma_p = 2 * pullFactor * material.tensile;
                const requiredArea = (T1 - T2) / sigma_p;

                // STAGE 8: Belt Life
                const sigmaTensileStress = (T1 - T2) / requiredArea;
                const sigmaCentrifugal = (material.density * Math.pow(beltVelocity, 2)) / 1e6;
                const sigmaBending = (material.modulus * 4) / d1;
                const sigmaMax = sigmaTensileStress + sigmaCentrifugal + sigmaBending;

                let lifeHours = 0;
                let lifeYears = 0;

                if (beltVelocity > 0 && sigmaMax > 0) {
                    const sigma1 = 5;
                    const x = 2;
                    const m = 5;
                    lifeHours = (Math.pow(10, 7) * beltLengthM) / (beltVelocity * 3600 * x) * Math.pow(sigma1 / sigmaMax, m);
                    lifeYears = lifeHours / (hoursPerDay * daysPerYear);
                }

                // STAGE 9: Shaft Design
                const designPowerW = designPower * 1000;
                const inputTorque = (designPowerW * 60) / (2 * Math.PI * inputSpeed);
                const outputTorque = (designPowerW * 60) / (2 * Math.PI * outputSpeed);

                const shearStress = 50;
                const inputShaftDia = Math.pow((16 * inputTorque * 1000) / (Math.PI * shearStress), 1/3);
                const outputShaftDia = Math.pow((16 * outputTorque * 1000) / (Math.PI * shearStress), 1/3);

                const inputShaftDiaStandard = findNearestStandard(inputShaftDia, standardShaftDiameters);
                const outputShaftDiaStandard = findNearestStandard(outputShaftDia, standardShaftDiameters);

                // STAGE 10: Taper Key
                const inputKey = getTaperKey(inputShaftDiaStandard);
                const outputKey = getTaperKey(outputShaftDiaStandard);

                const results = {
                    power, inputSpeed, outputSpeed, centreDistance, slip: slip*100, material, driveType,
                    d1, d2, reductionRatio, beltLength, beltLengthM, beltVelocity,
                    angleOfLapDeg, angleOfLapRad, loadFactor, designPower, T1, T2, tensionRatio,
                    sigmaMax, lifeHours, lifeYears, inputTorque, outputTorque, 
                    inputShaftDia, outputShaftDia, inputShaftDiaStandard, outputShaftDiaStandard, 
                    inputKey, outputKey, requiredArea
                };

                displayResults(results);
                
            } catch (e) {
                alert('Error in calculation: ' + e.message);
                console.error(e);
            }
        }

        function displayResults(r) {
            // Results Cards
            const resultsHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Input Pulley Diameter</td><td><b>${r.d1}</b></td><td>mm</td></tr>
                        <tr><td>Output Pulley Diameter</td><td><b>${r.d2}</b></td><td>mm</td></tr>
                        <tr><td>Reduction Ratio</td><td><b>${r.reductionRatio.toFixed(3)}</b></td><td>-</td></tr>
                        <tr><td>Belt Length</td><td><b>${r.beltLengthM.toFixed(3)}</b></td><td>m</td></tr>
                        <tr><td>Belt Speed</td><td><b>${r.beltVelocity.toFixed(3)}</b></td><td>m/s</td></tr>
                        <tr><td>Angle of Lap</td><td><b>${r.angleOfLapDeg.toFixed(2)}</b></td><td>¬∞</td></tr>
                        <tr><td>Tight Side Tension T‚ÇÅ</td><td><b>${r.T1.toFixed(2)}</b></td><td>N</td></tr>
                        <tr><td>Slack Side Tension T‚ÇÇ</td><td><b>${r.T2.toFixed(2)}</b></td><td>N</td></tr>
                        <tr style="border-top: 2px solid #2a5caa;"><td><b style="color:#2a5caa;">Maximum Stress</b></td><td><b style="color:#2a5caa;">${r.sigmaMax.toFixed(4)}</b></td><td>N/mm¬≤</td></tr>
                        <tr><td style="color: #28a745;"><b>Belt Life (Hours)</b></td><td style="color: #28a745;"><b>${r.lifeHours.toFixed(2)}</b></td><td>hrs</td></tr>
                        <tr><td style="color: #28a745;"><b>Belt Life (Years)</b></td><td style="color: #28a745;"><b>${r.lifeYears.toFixed(4)}</b></td><td>yrs</td></tr>
                        <tr style="border-top: 2px solid #2a5caa;"><td><b style="color:#2a5caa;">Input Shaft Diameter (calc)</b></td><td><b style="color:#2a5caa;">${r.inputShaftDia.toFixed(2)}</b></td><td>mm</td></tr>
                        <tr><td><b style="color:#2a5caa;">Input Shaft Diameter (std)</b></td><td><b style="color:#2a5caa;">${r.inputShaftDiaStandard}</b></td><td>mm</td></tr>
                        <tr><td><b style="color:#2a5caa;">Input Torque</b></td><td><b style="color:#2a5caa;">${r.inputTorque.toFixed(2)}</b></td><td>Nm</td></tr>
                        <tr><td><b style="color:#2a5caa;">Input Taper Key (b√ót)</b></td><td><b style="color:#2a5caa;">${r.inputKey ? r.inputKey.width+'√ó'+r.inputKey.thickness : 'N/A'}</b></td><td>mm</td></tr>
                        <tr style="border-top: 2px solid #2a5caa;"><td><b style="color:#2a5caa;">Output Shaft Diameter (calc)</b></td><td><b style="color:#2a5caa;">${r.outputShaftDia.toFixed(2)}</b></td><td>mm</td></tr>
                        <tr><td><b style="color:#2a5caa;">Output Shaft Diameter (std)</b></td><td><b style="color:#2a5caa;">${r.outputShaftDiaStandard}</b></td><td>mm</td></tr>
                        <tr><td><b style="color:#2a5caa;">Output Torque</b></td><td><b style="color:#2a5caa;">${r.outputTorque.toFixed(2)}</b></td><td>Nm</td></tr>
                        <tr><td><b style="color:#2a5caa;">Output Taper Key (b√ót)</b></td><td><b style="color:#2a5caa;">${r.outputKey ? r.outputKey.width+'√ó'+r.outputKey.thickness : 'N/A'}</b></td><td>mm</td></tr>
                    </tbody>
                </table>
            `;
            document.getElementById('resultsContainer').innerHTML = resultsHTML;

            // Detailed Output
            const detailedHTML = `
                <h3 style="color: var(--primary-color); margin-bottom: 15px;">Stress & Shaft Analysis</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Stress Component</th>
                            <th>Value</th>
                            <th>Unit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Tensile Stress</td><td>${((r.T1-r.T2)/r.requiredArea).toFixed(4)}</td><td>N/mm¬≤</td></tr>
                        <tr><td>Centrifugal Stress</td><td>${((r.material.density * Math.pow(r.beltVelocity, 2)) / 1e6).toFixed(4)}</td><td>N/mm¬≤</td></tr>
                        <tr><td>Bending Stress</td><td>${((r.material.modulus * 4) / r.d1).toFixed(4)}</td><td>N/mm¬≤</td></tr>
                        <tr style="border-top: 2px solid var(--primary-color);"><td><b>Total (œÉ_max)</b></td><td><b style="color: var(--accent-color);">${r.sigmaMax.toFixed(4)}</b></td><td>N/mm¬≤</td></tr>
                    </tbody>
                </table>
            `;
            document.getElementById('detailedOutput').innerHTML = detailedHTML;
        }

        function resetForm() {
            document.getElementById('power').value = '5';
            document.getElementById('n1').value = '1440';
            document.getElementById('n2').value = '720';
            document.getElementById('center').value = '2500';
            document.getElementById('slip').value = '2';
            document.getElementById('material').value = 'canvas';
            document.getElementById('driveType').value = 'open';
            document.getElementById('mu').value = '0.25';
            document.getElementById('load').value = '1.0';
            document.getElementById('kFactor').value = '1250';
            document.getElementById('pullFactor').value = '0.55';
            document.getElementById('hoursPerDay').value = '8';
            document.getElementById('daysPerYear').value = '300';
            document.getElementById('resultsContainer').innerHTML = '<p style="color: #999; font-style: italic;">Click "Calculate Design" to see results...</p>';
            document.getElementById('detailedOutput').innerHTML = '';
        }

        window.onload = function() {
            document.getElementById('resultsContainer').innerHTML = '<p style="color: #999; font-style: italic;">Click "Calculate Design" to see results...</p>';
        };
    </script>
</body>
</html>
